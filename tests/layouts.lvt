\documentclass{article}
\IfFileExists{regression.sty}{\usepackage{regression}}{\usepackage{support/regression}}

\def\layouts{%
  spring layout,%
  spring electrical layout,%
  layered layout,%
  tree layout%
}

\def\sizes{%
  small,%
  medium,%
  large%
}

\begin{document}

\section{Information}

\TeXTable
\clearpage

\section{Default layout}

\foreach \size in \sizes {
  \edef\name{Default layout (\size)}
  \subsection\name

  \expandafter\BEGINTEST\expandafter{\name}
  \feynmandiagram [horizontal=a to b, \size] {
    i1 [particle=\(e^{-}\)] -- [fermion] a [blob],
    i2 [particle=\(e^{+}\)] -- [anti fermion] a,
    a -- [photon, edge label=\(\gamma\)] b [dot],
    b -- [anti fermion] f1 [particle=\(\mu^{-}\)],
    b -- [fermion] f2 [particle=\(\mu^{+}\)],
  };
  \ENDTEST
}

\clearpage

\foreach \layout in \layouts {
  \section{\layout}

  \foreach \size in \sizes {
    \edef\name{\layout\ (\size)}
    \subsection\name

    \expandafter\BEGINTEST\expandafter{\name}
    \feynmandiagram [horizontal=a to b, \size, \layout] {
      i1 [particle=\(e^{-}\)] -- [fermion] a [blob],
      i2 [particle=\(e^{+}\)] -- [anti fermion] a,
      a -- [photon, edge label=\(\gamma\)] b [dot],
      b -- [anti fermion] f1 [particle=\(\mu^{-}\)],
      b -- [fermion] f2 [particle=\(\mu^{+}\)],
    };
    \ENDTEST
  }

  \clearpage
}

\section{Manual layout}
\foreach \size in \sizes {
  \edef\name{Manual layout (\size)}
  \subsection\name

  \expandafter\BEGINTEST\expandafter{\name}
  \begin{tikzpicture}
    \begin{feynman}[\size]
      \vertex [blob] (a) {};
      \vertex [right=of a] (b);
      \vertex [above left=of a] (i1) {\(e^{-}\)};
      \vertex [below left=of a] (i2) {\(e^{+}\)};
      \vertex [above right=of b] (f1) {\(\mu^{-}\)};
      \vertex [below right=of b] (f2) {\(\mu^{+}\)};

      \diagram* {
        (i1) -- [fermion] (a) -- [fermion] (i2),
        (a) -- [photon, edge label=\(\gamma\)] (b),
        (f1) -- [fermion] (b) -- [fermion] (f2),
      };
    \end{feynman}
  \end{tikzpicture}
  \ENDTEST
}

\end{document}
